version: '3.8'
services:
  db:
    image: mysql:8.0.19
    environment:
      - 'MYSQL_ROOT_PASSWORD=root'
    networks:
      - 'photo-network'
    ports:
      - '3306:3306'
    volumes:
      - '/Users/mac/IdeaProjects/spring-boot-demo/src/main/resources/db/:/docker-entrypoint-initdb.d'
    depends_on:
      - frontend
  backend:
    build:
      context: '/Users/mac/IdeaProjects/spring-boot-demo'
      dockerfile: 'Dockerfile'
    image: 'springboot-img:v0.1'
    networks:
      - 'photo-network'
    depends_on:
      - db
    ports:
      - '8080:8080'
  frontend:
    build:
      context: '/Users/mac/IdeaProjects/Photos'
      dockerfile: 'Dockerfile'
    image: 'react-img:v0.1'
    networks:
      - 'photo-network'
    ports:
      - '3000:3000'
volumes:
  mysqlvol:
networks:
  photo-network: {}